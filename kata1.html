<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kata1</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-sRIl4kxILFvY47J16cr9ZwB07vP4J8+LH7qKQnuqkuIAvNWLzeN8tE5YBujZqJLB" crossorigin="anonymous">

</head>
<body>
    <div class="root">
        <ul></ul>
    </div>

    <input type="text" id="inputByAdd">
    <button type="button" id="buttonByAdd">確定新增</button>

    <script>
       const data = [
                {
                    id:1,
                    content:'我是卡斯柏'
                },
                {
                    id:2,
                    content:'我是傑克'
                },
                {
                    id:3,
                    content:'我是小美人魚'    
                },
            ];

    //取DOM元素
    const root =document.querySelector('.root ul')
    const inputByAdd=document.querySelector('#inputByAdd')
    const buttonByAdd=document.querySelector('#buttonByAdd')

    //渲染畫面
    //取input value
    buttonByAdd.addEventListener('click', ()=>{
        const val=inputByAdd.value;
        addItem(val);
        inputByAdd.value='';
    })
    function render(){
        let template='';
        data.forEach(item=>{
            template+=`<li>${item.content}<button class='buttonByRemove' data-id='${item.id}'> 刪除</button></li>`
        });
        root.innerHTML=template;
    //刪除已渲染item，要寫在render function理
        const buttonByRemove=document.querySelectorAll('.buttonByRemove');
        console.log(buttonByRemove)
        buttonByRemove.forEach(item=>{
            item.addEventListener('click', evt=>{
                const id =evt.target.dataset.id;
                removeItem(id);
            })
        })
    };

    
    
    
    //新增資料
    let givenId=data.length;
    function addItem(content){
        givenId++;
        data.push(
            {
                id:givenId,
                content,
            }
        );
        render()
    };

    //刪除資料
    function removeItem(id){
        const index=data.findIndex(item=>item.id===id);
        data.splice(index,1);
        render();
    };

    render();




    </script>
    
</body>
</html>