<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-sRIl4kxILFvY47J16cr9ZwB07vP4J8+LH7qKQnuqkuIAvNWLzeN8tE5YBujZqJLB" crossorigin="anonymous">

</head>
<body>

    <div class="root"><ul></ul></div>
    <input type="text" class="inputByAdd">
    <button type="button" class="buttonByAdd">新增</button>


    <script>

        //all DOM
        const root=document.querySelector('.root');
        const inputByAdd=document.querySelector('.inputByAdd');
        const buttonByAdd=document.querySelector('.buttonByAdd');

        const data = [
                {
                    id:1,
                    content:'我是卡斯柏'
                },
                {
                    id:2,
                    content:'我是傑克'
                },
                {
                    id:3,
                    content:'我是小美人魚'    
                },
            ];
            //DOM操作
            function render(){
                let template='';
                data.forEach(item=>{
                    template+=`<li>${item.content}<button type='button'class='buttonByRemove' data-id='${item.id}'>刪除</button></li>`;
                    root.innerHTML=template;
                });
                const buttonByRemove=document.querySelectorAll('.buttonByRemove');
                buttonByRemove.forEach(item=>{
                    item.addEventListener('click', evt=>{
                        removeItem(evt.target.dataset.id);
                    })
                })
            };

            //新增item
            buttonByAdd.addEventListener('click', function(evt){
                const val=inputByAdd.value;
                addItem(val);
                inputByAdd.value='';
            })


            //新增data function
            let givenId=data.length;
            function addItem(content){
            givenId++;
            data.push({
                id:givenId,
                content,        
            });
            render();
            };

            //刪除data function
            function removeItem(id){
            const index=data.findIndex(item=>id===item.id);
            data.splice(index,1);
            render();
            };

    render();




    </script>
</body>
</html>